
<script src="//ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
<script> 
    jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";
</script>

<script type="text/javascript">
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
    results = regex.exec(location.search);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

var url = getParameterByName("url");
var keyId = getParameterByName("id");
var key = getParameterByName("k");
var getLang = getParameterByName("lang");

if (!url) {
    alert("Faltan parámetros en la URL. Asegúrate de incluir 'url'.");
}
</script>

<!-- Mensaje de carga -->
<div id="loading-message"></div>

<!-- Contenedor del reproductor -->
<div id="player"></div>

<script>
var playerInstance = jwplayer("player");

// Mostrar el mensaje de carga antes de que comience la reproducción
document.getElementById("loading-message").style.display = "block";

playerInstance.setup({
    playlist: [{
        "sources": [
            {
                "default": false,
                "type": "dash",
                "file": url,  // Usar el parámetro 'url' desde la URL
                "drm": {
                    "clearkey": { "keyId": keyId, "key": key }  // Usar los parámetros 'id' y 'k' si están presentes
                },
                "label": "0"
            }
        ]
    }],
    width: "100%",
    height: "100%",
    aspectratio: "16:9",
    autostart: true,  // Reproducción automática activada
    volume: 100,      // Volumen al máximo
    mute: false,      // Desactivar mute al iniciar
    cast: {},
    sharing: {}
});

// Ocultar el mensaje de carga cuando comience la reproducción
jwplayer().on("play", function(e) {
    document.getElementById("loading-message").style.display = "none";  // Oculta el mensaje
    if (!getLang) {
        getLang = 0;
    }
    jwplayer().setCurrentAudioTrack(getLang);
});
</script>
